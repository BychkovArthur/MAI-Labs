#include <stdio.h>
#include <ctype.h>

/* Лабораторная работа №13. Вариант 2
   Определить, есть ли слово, все согласные которого различны.
   Студент группы М8О-101Б-22 Бычков А.*/

// "Алфавит" только из согласных букв ("алфавит" реализуется, как число, в котором 1 и 0 на i-ом индексе (справа, нумерация с 1) в двоичном представлении числа означают, что буква с i-ым номером по алфавиту присутствует или же отсутствует соответственно)
#define CONSONANTS (1u<<('q' - 'a') | 1u<<('w' - 'a') | 1u<<('r' - 'a') | 1u<<('t' - 'a') | 1u<<('p' - 'a') | 1u<<('s' - 'a') | 1u<<('d' - 'a') | 1u<<('f' - 'a') | 1u<<('g' - 'a') | 1u<<('h' - 'a') | 1u<<('j' - 'a') | 1u<<('k' - 'a') | 1u<<('l' - 'a') | 1u<<('z' - 'a') | 1u<<('x' - 'a') | 1u<<('c' - 'a') | 1u<<('v' - 'a') | 1u<<('b' - 'a') | 1u<<('n' - 'a') | 1u<<('m' - 'a')) 

int main() {
	// c - текущий символ; letters - "алфавит" из букв текущего слова; num - номер по алфавиту текущей буквы; in_word - ключ, проверяющуй, находимся ли мы в слове; good - ключ, проверяющий, подходит ли слово; count - счетчик подходящих слов.
	char c;
	unsigned int letters, num, in_word, good, count = 0;
	
	// Открытие файлов
	FILE *file = fopen("lab13_data.txt", "r");
	FILE *ans = fopen("lab13_answer.txt", "w");
	
	// Чтение файла
	while ( (c = getc(file)) != EOF ){
		
		// Не учитываем регистр
		c = tolower(c);
		if (c == '.' || c == ',') {
			continue;
		}
		
		// Заходим в слово, если это буква, и до этого было не слово
		if (isalpha(c) && in_word == 0) {
			in_word = 1;
			good = 1;
			letters = 0;
		}
		
		// Выходим из слова, если это пробельный символ (табуляция, пробел, перенос строки), и если до этого был в слове
		if (isspace(c) && in_word) {
		
			// Если слово подходящее, увеличиваем счетчик
			if (in_word == 1 && good) {
				good = 0;
				count++;
			}
			
			in_word = 0;
			continue;
			
		}
		
		// Находимся внутри слова
		if (in_word) {
			// Номер буквы по алфавиту
			num = 1u<<(c - 'a');
			
			// Проверяем, является ли согласной
			if ( ( CONSONANTS % (2 * num) ) >= num ){
				// Проверяем, является ли согласной, которая уже была в этом слове, если она таковая, то все слово не подходит
				if (( letters % (2 * num) ) >= num){
					good = 0;
					
					
				}
			}
			
			// В "алфавит" записываем букву, которая попалась
			letters |= num;
			
		}
	}
	// Вывод ответа
	if (count) {
		fprintf(ans, "Подходящих слов - %d\n", count);
	} else {
		fprintf(ans, "Нет подходящих слов");
	}
	
	// Закрытие файлов
	fclose(file);
	fclose(ans);
}